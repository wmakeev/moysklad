![moysklad](https://wmakeev-public-files.s3-eu-west-1.amazonaws.com/images/logos/logoMS500x350.png)

# moysklad <!-- omit in toc -->

[![npm](https://img.shields.io/npm/v/moysklad.svg?cacheSeconds=1800&style=flat-square)](https://www.npmjs.com/package/moysklad)
[![GitHub Actions Workflow Status](https://img.shields.io/github/actions/workflow/status/wmakeev/moysklad/main.yml?style=flat-square)](https://github.com/wmakeev/moysklad/actions/workflows/main.yml)
<!-- [![Codecov](https://img.shields.io/codecov/c/github/wmakeev/moysklad?style=flat-square)](https://app.codecov.io/gh/wmakeev/moysklad/tree/master/) -->

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å [JSON API —Å–µ—Ä–≤–∏—Å–∞ –ú–æ–π–°–∫–ª–∞–¥](https://dev.moysklad.ru/) –¥–ª—è node.js.

> **–í–ù–ò–ú–ê–ù–ò–ï!** –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å—Ç–∞–¥–∏–∏ —Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è. API –º–æ–∂–µ—Ç –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –º–µ–Ω—è—Ç—å—Å—è. –ü–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –º–∏–Ω–æ—Ä–Ω–æ–π –≤–µ—Ä—Å–∏–∏ —Å–º–æ—Ç—Ä–∏—Ç–µ [–∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π](https://github.com/wmakeev/moysklad/blob/master/CHANGELOG.md).

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ–π –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –º–µ—Ç–æ–¥–∞–º [API –ú–æ–π–°–∫–ª–∞–¥](https://api.moysklad.ru/api/remap/1.2/doc), –Ω–µ –∞–±—Å—Ç—Ä–∞–≥–∏—Ä—É–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –æ—Ç API –∏ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö –∏ –ø–æ–ª—É—á–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

–û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ - —É–ø—Ä–æ—Å—Ç–∏—Ç—å —Ä—è–¥ —Ä—É—Ç–∏–Ω–Ω—ã—Ö –∑–∞–¥–∞—á:

- —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ (–ø–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è)
- –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –º–µ—Ç–æ–¥—ã –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–∞—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç –ú–æ–π–°–∫–ª–∞–¥ –∏ –æ–±—Ä–∞—Ç–Ω–æ –≤ `Date`
- –±–∞–∑–æ–≤—ã–µ —Ç–∏–ø—ã TypeScript –¥–ª—è –ø–æ–¥—Å–∫–∞–∑–æ–∫ –ø–æ API –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (–Ω–æ –Ω–µ –¥–ª—è API –ú–æ–π–°–∫–ª–∞–¥)

–í–∞–∂–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–µ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å API –ú–æ–π–°–∫–ª–∞–¥, –Ω–æ –ª–∏—à—å —É–ø—Ä–æ—Å—Ç–∏—Ç —Ä–∞–±–æ—Ç—É —Å –Ω–∏–º.

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ <!-- omit in toc -->

- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
- [–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏](#–ø–∞—Ä–∞–º–µ—Ç—Ä—ã-–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏)
- [–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è](#–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)
- [–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã](#—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ-–º–µ—Ç–æ–¥—ã)
  - [getTimeString](#gettimestring)
  - [parseTimeString](#parsetimestring)
  - [parseUrl (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥)](#parseurl-—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π-–º–µ—Ç–æ–¥)
  - [buildFilter](#buildfilter)
  - [buildQuery](#buildquery)
  - [getVersion](#getversion)
- [–ú–µ—Ç–æ–¥—ã —ç–∫–∑–µ–º–ø–ª—è—Ä–∞](#–º–µ—Ç–æ–¥—ã-—ç–∫–∑–µ–º–ø–ª—è—Ä–∞)
  - [GET](#get)
  - [POST](#post)
  - [PUT](#put)
  - [DELETE](#delete)
  - [getOptions](#getoptions)
  - [getVersion - –º–µ—Ç–æ–¥ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞](#getversion---–º–µ—Ç–æ–¥-—ç–∫–∑–µ–º–ø–ª—è—Ä–∞)
  - [buildUrl](#buildurl)
  - [parseUrl](#parseurl)
  - [fetchUrl](#fetchurl)
  - [–û—Å–Ω–æ–≤–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã](#–æ—Å–Ω–æ–≤–Ω—ã–µ-–∞—Ä–≥—É–º–µ–Ω—Ç—ã)
    - [path](#path)
    - [query](#query)
      - [querystring](#querystring)
      - [filter](#filter)
      - [order](#order)
      - [expand –∏ limit](#expand-–∏-limit)
    - [options (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞)](#options-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã-–∑–∞–ø—Ä–æ—Å–∞)
- [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–º –∑–∞–ø—Ä–æ—Å–æ–≤](#—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-–ø–æ—Ç–æ–∫–æ–º-–∑–∞–ø—Ä–æ—Å–æ–≤)
- [–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫](#–æ–±—Ä–∞–±–æ—Ç–∫–∞-–æ—à–∏–±–æ–∫)
  - [–ü–æ–≤—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ](#–ø–æ–≤—Ç–æ—Ä-–∑–∞–ø—Ä–æ—Å–∞-–ø—Ä–∏-–æ—à–∏–±–∫–µ)
  - [–í–∏–¥—ã –æ—à–∏–±–æ–∫](#–≤–∏–¥—ã-–æ—à–∏–±–æ–∫)
    - [MoyskladError](#moyskladerror)
    - [MoyskladRequestError](#moyskladrequesterror)
    - [MoyskladApiError](#moyskladapierror)
    - [MoyskladCollectionError](#moyskladcollectionerror)
    - [MoyskladUnexpectedRedirectError](#moyskladunexpectedredirecterror)
- [–°–æ–±—ã—Ç–∏—è](#—Å–æ–±—ã—Ç–∏—è)
- [–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π](#–∏—Å—Ç–æ—Ä–∏—è-–∏–∑–º–µ–Ω–µ–Ω–∏–π)
- [–ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è](#–ø–ª–∞–Ω—ã-—Ä–∞–∑–≤–∏—Ç–∏—è)
- [TODO](#todo)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

> –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è (—Ç–µ—Å—Ç–∏—Ä—É—é—Ç—Å—è) –≤–µ—Ä—Å–∏–∏ Node.js >=16.8

```bash
npm install moysklad
```

–î–ª—è Node.js –¥–æ 18 –≤–µ—Ä—Å–∏–∏, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è
[Fetch API](https://developer.mozilla.org/en/docs/Web/API/Fetch_API) –∏ —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å –º–æ–¥—É–ª—å —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

```bash
npm install undici
```

[undici.fetch](https://github.com/nodejs/undici#undicifetchinput-init-promise)

```js
import { fetch } from 'undici'
import Moysklad from 'moysklad'

const moysklad = Moysklad({ fetch })
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```js
import Moysklad from 'moysklad'

// –î–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ new –Ω–µ –Ω—É–∂–Ω–æ
const ms = Moysklad({ login, password })

ms.GET('entity/customerorder', {
  filter: {
    applicable: true,
    state: {
      name: '–û—Ç–≥—Ä—É–∂–µ–Ω'
    },
    sum: { $gt: 1000000, $lt: 2000000 }
  },
  limit: 10,
  order: 'moment,desc',
  expand: 'agent'
}).then(({ meta, rows }) => {
  console.log(
    `–ü–æ—Å–ª–µ–¥–Ω–∏–µ ${meta.limit} –∏–∑ ${meta.size} –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ ` +
      `–≤ —Å—Ç–∞—Ç—É—Å–µ "–û—Ç–≥—Ä—É–∂–µ–Ω" –Ω–∞ —Å—É–º–º—É –æ—Ç 10000 –¥–æ 20000 —Ä—É–±`
  )

  // –í—ã–≤–æ–¥–∏–º –∏–º—è –∑–∞–∫–∞–∑–∞, –∏–º—è –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞ –∏ —Å—É–º–º—É –∑–∞–∫–∞–∑–∞ –¥–ª—è –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π
  rows.forEach(row => {
    console.log(`${row.name} ${row.agent.name} ${row.sum / 100}`)
  })
})
```

> –°–æ–≤–º–µ—Å—Ç–Ω–æ —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–ø—Ä–æ—Å–æ–≤](#—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-–ø–æ—Ç–æ–∫–æ–º-–∑–∞–ø—Ä–æ—Å–æ–≤)

> –° –¥—Ä—É–≥–∏–º–∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è –≤ –ø–∞–ø–∫–µ [examples](https://github.com/wmakeev/moysklad/tree/master/examples)

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

–í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ (–∏–º–µ—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

| –ü–∞—Ä–∞–º–µ—Ç—Ä     | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é                                                                            | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                                                                                                                                                                                                           |
| ------------ | ------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `fetch`      | –≥–ª–æ–±–∞–ª—å–Ω—ã–π fetch                                                                                 | –§—É–Ω–∫—Ü–∏—è —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º [Fetch API](https://developer.mozilla.org/ru/docs/Web/API/Fetch_API). –ï—Å–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–π fetch –Ω–µ –Ω–∞–π–¥–µ–Ω, —Ç–æ –±—É–¥–µ—Ç –≤—ã–±—Ä–æ—à–µ–Ω–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –æ—Å—É—â–µ—Å—Ç–≤–∏—Ç—å http –∑–∞–ø—Ä–æ—Å. –ù–∞—á–∏–Ω–∞—è —Å Node.js 18 [fetch](https://nodejs.org/dist/latest-v18.x/docs/api/globals.html#fetch) —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏. |
| `retry`      | —Ñ—É–Ω–∫—Ü–∏—è –≤–∏–¥–∞ `(thunk) => thunk()`                                                                | –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –æ—à–∏–±–æ–∫ (—Å–º. [–ü–æ–≤—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ](#–ø–æ–≤—Ç–æ—Ä-–∑–∞–ø—Ä–æ—Å–∞-–ø—Ä–∏-–æ—à–∏–±–∫–µ)).                                                                                                                                                                                                          |
| `endpoint`   | `"https://api.moysklad.ru/api"`                                                                  | –¢–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ API (—Ö–æ—Å—Ç —Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `MOYSKLAD_HOST`, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `api.moysklad.ru`)                                                                                                                                                                                                  |
| `api`        | `"remap"`                                                                                        | –†–∞–∑–¥–µ–ª API (–º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `MOYSKLAD_API`)                                                                                                                                                                                                                                                                |
| `apiVersion` | `"1.2"`                                                                                          | –í–µ—Ä—Å–∏—è API (–º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `MOYSKLAD_{NAME}_API_VERSION`, –≥–¥–µ `{NAME}` - –Ω–∞–∑–≤–∞–Ω–∏–µ API –≤ –≤–µ—Ä—Ö–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ, –Ω–∞–ø—Ä. `MOYSKLAD_REMAP_API_VERSION`)                                                                                                                                                             |
| `token`      | `undefined`                                                                                      | –¢–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ –∫ API (—Å–º. [–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è](#–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è))                                                                                                                                                                                                                                                                        |
| `login`      | `undefined`                                                                                      | –õ–æ–≥–∏–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ API (—Å–º. [–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è](#–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è))                                                                                                                                                                                                                                                                    |
| `password`   | `undefined`                                                                                      | –ü–∞—Ä–æ–ª—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ API (—Å–º. [–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è](#–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è))                                                                                                                                                                                                                                                                   |
| `emitter`    | `undefined`                                                                                      | —ç–∫–∑–µ–º–ø–ª—è—Ä [EventEmitter](https://nodejs.org/api/events.html#events_class_eventemitter) –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ [—Å–æ–±—ã—Ç–∏–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏](#—Å–æ–±—ã—Ç–∏—è)                                                                                                                                                                                                 |
| `userAgent`  | `moysklad/{ver} (+https://github.com/wmakeev/moysklad)`, –≥–¥–µ `{ver}` - —Ç–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ | –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ "User-Agent" –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞. –£–¥–æ–±–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —á–µ—Ä–µ–∑ API –Ω–∞ –≤–∫–ª–∞–¥–∫–µ "–ê—É–¥–∏—Ç". –ú–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `MOYSKLAD_USER_AGENT`.                                                                                                                                  |

–Ø–≤–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–Ω–æ–µ –≤ —Å–æ–æ—Ç–≤. –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è.

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```js
import Moysklad from 'moysklad'

// –Ø–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –≤–µ—Ä—Å–∏–∏ API
const moysklad = Moysklad({ apiVersion: '1.2' })
```

## –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–ï—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤ –ø–µ—Ä–µ–¥–∞—á–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:

1. –ù–∞–ø—Ä—è–º—É—é –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞

   ```js
   // –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ –ª–æ–≥–∏–Ω—É –∏ –ø–∞—Ä–æ–ª—é
   const moysklad = Moysklad({ login, password })
   ```

   ```js
   // –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ —Ç–æ–∫–µ–Ω—É
   const moysklad = Moysklad({ token })
   ```

2. –ß–µ—Ä–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

   –ï—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–µ —É–∫–∞–∑–∞–Ω—ã –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞,

   ```js
   const moysklad = Moysklad()
   ```

   —Ç–æ –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ–¥–µ–Ω –ø–æ–∏—Å–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ:

   1. –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `process.env.MOYSKLAD_TOKEN`
   2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è `process.env.MOYSKLAD_LOGIN` –∏ `process.env.MOYSKLAD_PASSWORD`
   3. –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `window.MOYSKLAD_TOKEN`
   4. –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `window.MOYSKLAD_LOGIN` –∏ `window.MOYSKLAD_PASSWORD`
   5. –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `global.MOYSKLAD_TOKEN`
   6. –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `global.MOYSKLAD_LOGIN` –∏ `global.MOYSKLAD_PASSWORD`

## –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã

### getTimeString

> –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—É—é –¥–∞—Ç—É –≤ —Å—Ç—Ä–æ–∫—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ API –ú–æ–π–°–∫–ª–∞–¥ –≤ —á–∞—Å–æ–≤–æ–º –ø–æ—è—Å–µ –ú–æ—Å–∫–≤—ã

```ts
Moysklad.getTimeString(date: Date, includeMs?: boolean): string
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

`date` - –¥–∞—Ç–∞

`includeMs` - –µ—Å–ª–∏ `true`, —Ç–æ –≤ –¥–∞—Ç—É –±—É–¥—É—Ç –≤–∫–ª—é—á–µ–Ω—ã –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```js
const date = new Date('2017-02-01T07:10:11.123Z')
const timeString = Moysklad.getTimeString(date, true)

assert.equal(timeString, '2017-02-01 10:10:11.123')
```

### parseTimeString

> –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Å—Ç—Ä–æ–∫—É —Å –¥–∞—Ç–æ–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ API –ú–æ–π–°–∫–ª–∞–¥ –≤ –æ–±—ä–µ–∫—Ç –¥–∞—Ç—ã (—Å —É—á–µ—Ç–æ–º –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞ –∏ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞ API –ú–æ–π–°–∫–ª–∞–¥)

```ts
Moysklad.parseTimeString(date: string) : Date
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

`date` - –¥–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –ú–æ–π–°–∫–ª–∞–¥ (–Ω–∞–ø—Ä. `2017-04-08 13:33:00.123`)

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```js
const parsedDate = Moysklad.parseTimeString('2017-04-08 13:33:00.123')

assert.equal(parsedDate.toISOString(), '2017-04-08T10:33:00.123Z')
```

### parseUrl (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥)

> –†–∞–∑–±–æ—Ä url –Ω–∞ —Å–æ—Å—Ç–∞–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

–ê–Ω–∞–ª–æ–≥–∏—á–µ–Ω [parseUrl](#parseurl) –º–µ—Ç–æ–¥—É —ç–∫–∑–µ–º–ø–ª—è—Ä–∞, –∑–∞ —Ç–µ–º –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º, —á—Ç–æ
–Ω–∞ –≤—Ö–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ href –ú–æ–π–°–∫–ª–∞–¥.

### buildFilter

> –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É —Ñ–∏–ª—å—Ç—Ä–∞ –ø–æ –æ–±—ä–µ–∫—Ç—É `QueryFilter` (—Å–º. [filter](#filter))

```js
Moysklad.buildFilter({ name: { $st: 'foo' } })
// 'code=123;name~=foo'
```

### buildQuery

> –§–æ—Ä–º–∏—Ä—É–µ—Ç —Å—Ç—Ä–æ–∫—É —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ –æ–±—ä–µ–∫—Ç—É `Query` (—Å–º. [query](#query))

```js
Moysklad.buildQuery({
  filter: { name: 'foo' },
  limit: 100,
  foo: 'bar'
})

// 'filter=name%3Dfoo&limit=100&foo=bar'
```

### getVersion

> –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏. –í–µ—Ä—Å–∏—è –∏–∑ package.json (–ø–æ–ª–µ `version`)

## –ú–µ—Ç–æ–¥—ã —ç–∫–∑–µ–º–ø–ª—è—Ä–∞

### GET

> GET –∑–∞–ø—Ä–æ—Å

```ts
ms.GET(path: string, query?: object, options?: object): Promise
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

`path` - [url —Ä–µ—Å—É—Ä—Å–∞](#path)

`query` - [–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞](#query)

`options` - [–æ–ø—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–∞](#options-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã-–∑–∞–ø—Ä–æ—Å–∞)

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```js
const productsCollection = await ms.GET('entity/product', { limit: 50 })

const order = await ms.GET(`entity/customerorder/${orderId}`, {
  expand: 'positions'
})
```

### POST

> POST –∑–∞–ø—Ä–æ—Å

```ts
ms.POST(
  path: string,
  payload?: object | Array<object>,
  query?: object,
  options?: object
): Promise
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

`path` - [url —Ä–µ—Å—É—Ä—Å–∞](#path)

`payload` - –æ–±—ä–µ–∫—Ç –∏–ª–∏ –∫–æ–ª–ª–µ–∫—Ü–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ (–±—É–¥–µ—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–æ –≤ —Å—Ç—Ä–æ–∫—É –º–µ—Ç–æ–¥–æ–º `JSON.stringify`)

`query` - [–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞](#query)

`options` - [–æ–ø—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–∞](#options-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã-–∑–∞–ø—Ä–æ—Å–∞)

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```js
const newProduct = await ms.POST('entity/product', { name: '–ù–æ–≤—ã–π —Ç–æ–≤–∞—Ä' })
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é, –ø—Ä–∏ –º–∞—Å—Å–æ–≤–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—É—â–Ω–æ—Å—Ç–µ–π, –µ—Å–ª–∏ _—Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω_ –∏–∑ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—à–∏–±–∫—É, —Ç–æ –º–µ—Ç–æ–¥ –≤—ã–±—Ä–æ—Å–∏—Ç –æ—à–∏–±–∫—É
[MoyskladCollectionError](#moyskladcollectionerror) .

–ï—Å–ª–∏ —Ç–∞–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–º, —Ç–æ –º–æ–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –ø—Ä–∏ –º–∞—Å—Å–æ–≤–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏/—Å–æ–∑–¥–∞–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤ –≤—Ä—É—á–Ω—É—é (—Å–º. `muteCollectionErrors` –≤ [–ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –∑–∞–ø—Ä–æ—Å–∞](#options-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã-–∑–∞–ø—Ä–æ—Å–∞)):

```js
const updated = await ms.POST('entity/supply', supplyList, null, {
  muteCollectionErrors: true
})

const errors = updated
  .filter(item => item.errors)
  .map(item => item.errors[0].error)

if (errors.length) {
  console.log('–ï—Å—Ç—å –æ—à–∏–±–∫–∏:', errors.join(', '))
}

const supplyHrefList = updated
  .filter(item => !item.errors)
  .map(item => item.meta.href)
```

### PUT

> PUT –∑–∞–ø—Ä–æ—Å

```ts
ms.PUT(
  path: string | string[],
  payload?: object,
  query?: object,
  options?: object
) : Promise
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

`path` - [url —Ä–µ—Å—É—Ä—Å–∞](#path)

`payload` - –æ–±–Ω–æ–≤–ª—è–µ–º—ã–π –æ–±—ä–µ–∫—Ç (–±—É–¥–µ—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω –≤ —Å—Ç—Ä–æ–∫—É –º–µ—Ç–æ–¥–æ–º `JSON.stringify`)

`query` - [–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞](#query)

`options` - [–æ–ø—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–∞](#options-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã-–∑–∞–ø—Ä–æ—Å–∞)

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```js
const updatedProduct = await ms.PUT(`entity/product/${id}`, product)
```

### DELETE

> DELETE –∑–∞–ø—Ä–æ—Å

```ts
ms.DELETE(path: string, options?: object): Promise
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

`path` - [url —Ä–µ—Å—É—Ä—Å–∞](#path)

`options` - [–æ–ø—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–∞](#options-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã-–∑–∞–ø—Ä–æ—Å–∞)

–ú–µ—Ç–æ–¥ `DELETE` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `undefined` –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ.

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```js
await ms.DELETE(`entity/product/${product.id}`)
```

### getOptions

> –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–ø—Ü–∏–∏ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –≤ –º–æ–º–µ–Ω—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```js
const options = {
  login: 'login',
  password: 'password'
}

const ms = Moysklad(options)

const msOptions = ms.getOptions()

assert.ok(msOptions !== options)
assert.equal(msOptions.login, 'login')
assert.equal(msOptions.password, 'password')
```

### getVersion - –º–µ—Ç–æ–¥ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞

> –ê–Ω–∞–ª–æ–≥–∏—á–µ–Ω —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–º—É –º–µ—Ç–æ–¥—É [getVersion](#getversion)

### buildUrl

> –§–æ—Ä–º–∏—Ä—É–µ—Ç url –∑–∞–ø—Ä–æ—Å–∞

```ts
ms.buildUrl(url: string, query?: object): string
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

`url` - –ø–æ–ª–Ω—ã–π url (–¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º)

`path` - [url —Ä–µ—Å—É—Ä—Å–∞](#path)

`query` - [–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞](#query)

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```js
const url = ms.buildUrl(
  'https://api.moysklad.ru/api/remap/1.2/entity/customerorder?expand=positions',
  { limit: 100 }
)

assert.equal(
  url,
  'https://api.moysklad.ru/api/remap/1.2/entity/customerorder?expand=positions&limit=100'
)
```

```js
const url = ms.buildUrl('entity/customerorder', { expand: 'positions' })

assert.equal(
  url,
  'https://api.moysklad.ru/api/remap/1.2/entity/customerorder?expand=positions'
)
```

–ú–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å —Å–∏–º–≤–æ–ª—ã `/`, –ª–∏—à–Ω–∏–µ –∑–Ω–∞–∫–∏ –±—É–¥—É—Ç –∏—Å–∫–ª—é—á–µ–Ω—ã –∏–∑
—Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–µ–≥–æ url

```js
const positionUrl = `/positions/${posId}/`

const url = ms.buildUrl(`entity/customerorder/` + positionUrl)

assert.equal(
  url,
  `https://api.moysklad.ru/api/remap/1.2/entity/customerorder/positions/${posId}`
)
```

### parseUrl

> –†–∞–∑–±–æ—Ä url –Ω–∞ —Å–æ—Å—Ç–∞–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```ts
ms.parseUrl(url: string): {
  endpoint: string
  api: string
  apiVersion: string
  path: Array<string>
  query: object
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

`url` - url —Ä–µ—Å—É—Ä—Å–∞

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```js
const parsedUri = ms.parseUrl('https://api.moysklad.ru/api/remap/1.2/entity/customerorder?expand=positions')

assert.deepEqual(parsedUri, {
  endpoint: 'https://api.moysklad.ru/api',
  api: 'remap'
  apiVersion: '1.2',
  path: ['entity', 'customerorder'],
  query: {
    expand: 'positions'
  }
})
```

### fetchUrl

> –í—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É url

```ts
ms.fetchUrl(url: string, options?: object): Promise
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

`url` - url —Ä–µ—Å—É—Ä—Å–∞

`options` - [–æ–ø—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–∞](#options-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã-–∑–∞–ø—Ä–æ—Å–∞)

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```js
const url = `https://api.moysklad.ru/api/remap/1.2/entity/customerorder/eb7bcc22-ae8d-11e3-9e32-002590a28eca`

const patch = { applicable: false }

const updatedOrder = await ms.fetchUrl(url, {
  method: 'PUT',
  body: JSON.stringify(patch)
})
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã

#### path

–°—Ç—Ä–æ–∫–∞.

**–ü—Ä–∏–º–µ—Ä—ã:**

Url –∑–∞–ø—Ä–æ—Å–∞ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é

```js
ms.GET(
  `https://api.moysklad.ru/api/remap/1.2/entity/customerorder/${ORDER_ID}/positions/${POSITION_ID}?expand=assortment`
)
```

–ù–æ –≥–æ—Ä–∞–∑–¥–æ —É–¥–æ–±–Ω–µ–µ —É–∫–∞–∑—ã–≤–∞—Ç—å –ø—É—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –≤–µ—Ä—Å–∏–∏ API –∏ –≤—ã–Ω–æ—Å–∏—Ç—å
–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ—Ç–æ–¥–∞. –ü–æ–ª–Ω—ã–π url –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, —Å–æ–≥–ª–∞—Å–Ω–æ [–Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º —ç–∫–∑–µ–º–ø–ª—è—Ä–∞](#–ø–∞—Ä–∞–º–µ—Ç—Ä—ã-–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏).

–ù–∏–∂–µ –ø—Ä–∏–º–µ—Ä –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞:

```js
ms.GET(`entity/customerorder/${ORDER_ID}/positions/${POSITION_ID}`, {
  expand: 'assortment'
})
```

–ú–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å —Å–∏–º–≤–æ–ª—ã `/`, –ª–∏—à–Ω–∏–µ –∑–Ω–∞–∫–∏ –±—É–¥—É—Ç –∏—Å–∫–ª—é—á–µ–Ω—ã –∏–∑
—Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–µ–≥–æ url

```js
const positionUrl = `/positions/${posId}`

ms.GET(`entity/customerorder/` + positionUrl)
```

#### query

##### querystring

–í—Å–µ –ø–æ–ª—è –æ–±—ä–µ–∫—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Å—Ç—Ä–æ–∫—É –∑–∞–ø—Ä–æ—Å–∞ url. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—è –º–æ–≥—É—Ç –ø–æ–¥–≤–µ—Ä–≥–∞—Ç—å—Å—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—é (–Ω–∞–ø—Ä. –ø–æ–ª—è [`filter`](#filter) –∏ [`order`](#order)).

–ü–æ–ª–µ –æ–±—ä–µ–∫—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞ –¥–æ–ª–∂–Ω–æ –∏–º–µ—Ç—å —Ç–∏–ø: `string`, `number`, `boolean`, `null` –∏–ª–∏ `undefined`, –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—ã–∑–æ–≤–µ—Ç –æ—à–∏–±–∫—É.

```js
const query = {
  str: 'some string',
  num: 1,
  bool: true,
  nil: null, // –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ —Å—Ç—Ä–æ–∫—É –∑–∞–ø—Ä–æ—Å–∞ —Å –ø—É—Å—Ç—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º
  nothing: undefined, // –ø–æ–ª–µ –±—É–¥–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω–æ
  arr: ['str', 1, true, null, undefined]
}

// https://api.moysklad.ru/api/remap/1.2/entity/demand?str=some%20string&num=1&bool=true&nil=&arr=str&arr=1&arr=true&arr=
ms.GET('entity/demand', query)
```

##### filter

–ï—Å–ª–∏ –ø–æ–ª–µ `filter` –æ–±—ä–µ–∫—Ç, —Ç–æ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–æ–ª—è `filter` –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞ –≤ —Å—Ç—Ä–æ–∫–µ –∑–∞–ø—Ä–æ—Å–∞ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏:

- `string`, `number`, `boolean` –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π (`key=value`)
- `null` –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É (`key=`)
- `Date` –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ —Å—Ç—Ä–æ–∫—É –º–µ—Ç–æ–¥–æ–º [`getTimeString`](#gettimestring) (`key=YYYY-MM-DD HH:mm:ss`)
- `object` –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ –Ω–∞–±–æ—Ä —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ –∏–ª–∏ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π (—Å–º. –ø—Ä–∏–º–µ—Ä –Ω–∏–∂–µ)

**–ü—Ä–∏–º–µ—Ä —Ñ–∏–ª—å—Ç—Ä–∞:**

```js
const query = {
  filter: {
    name: '00001',
    code: [1, 2, '03'],
    foo: new Date(2000, 0, 1),
    state: {
      name: '–û—Ñ–æ—Ä–º–ª–µ–Ω'
    },
    moment: {
      $gt: new Date(2000, 0, 1),
      $lte: new Date(2001, 0, 2, 10, 0, 15, 123)
    },
    bar: {
      baz: 1,
      $exists: true
    }
  }
}
```

—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–ª–µ–¥—É—é—â–µ–º—É –∑–Ω–∞—á–µ–Ω–∏—é –ø–æ–ª—è `filter` –≤ –∑–∞–ø—Ä–æ—Å–µ (–¥–∞—Ç—ã –ø–µ—Ä–µ–¥–∞–Ω—ã –≤ —á–∞—Å–æ–≤–æ–º –ø–æ—è—Å–µ +5):

```txt
bar!=;bar.baz=1;code=03;code=1;code=2;foo=1999-12-31 22:00:00;moment<=2001-01-02 08:00:15.123;moment>1999-12-31 22:00:00;name=00001;state.name=–û—Ñ–æ—Ä–º–ª–µ–Ω
```

–î–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –≤ —Å—Ç–∏–ª–µ Mongo (–∫–∞–∫ –≤ –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ).

–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤:

| –°–µ–ª–µ–∫—Ç–æ—Ä                             | –§–∏–ª—å—Ç—Ä –ú–æ–π–°–∫–ª–∞–¥               | –û–ø–∏—Å–∞–Ω–∏–µ                   |
| ------------------------------------ | ----------------------------- | -------------------------- |
| `key: { $eq: value }`                | `key=value`                   | —Ä–∞–≤–Ω–æ                      |
| `key: { $ne: value }`                | `key!=value`                  | –Ω–µ —Ä–∞–≤–Ω–æ                   |
| `key: { $gt: value }`                | `key>value`                   | –±–æ–ª—å—à–µ                     |
| `key: { $gte: value }`               | `key>=value`                  | –±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ           |
| `key: { $lt: value }`                | `key<value`                   | –º–µ–Ω—å—à–µ                     |
| `key: { $lte: value }`               | `key<=value`                  | –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ           |
| `key: { $st: value }`                | `key~=value`                  | –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å–æ —Å—Ç—Ä–æ–∫–∏       |
| `key: { $et: value }`                | `key=~value`                  | –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–æ–π      |
| `key: { $contains: value }`          | `key~value`                   | —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç—Ä–æ–∫—É            |
| `key: { $in: [..] }` –∏–ª–∏ `key: [..]` | `key=value1;key=value2;...`   | –≤—Ö–æ–¥–∏—Ç –≤                   |
| `key: { $nin: [..] }`                | `key!=value1;key!=value2;...` | –Ω–µ –≤—Ö–æ–¥–∏—Ç –≤                |
| `key: { $exists: true }`             | `key!=`                       | –Ω–∞–ª–∏—á–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è (–Ω–µ null) |
| `key: { $exists: false }`            | `key=`                        | –ø—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (null)     |
| `key: { $all: [{..}, ..] }`          |                               | –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏–π        |
| `key: { $not: {..} }`                |                               | –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ —É—Å–ª–æ–≤–∏—è          |

–ù–∞ –æ–¥–∏–Ω –∫–ª—é—á –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤.

–ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—Å—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ú–æ–π–°–∫–ª–∞–¥:

- [–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤—ã–±–æ—Ä–∫–∏ —Å –ø–æ–º–æ—â—å—é –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ filter](https://dev.moysklad.ru/doc/api/remap/1.2/#mojsklad-json-api-obschie-swedeniq-fil-traciq-wyborki-s-pomosch-u-parametra-filter)
- [–û–ø–µ—Ä–∞—Ç–æ—Ä —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ "–ø–æ–¥–æ–±–∏–µ"](https://dev.moysklad.ru/doc/api/remap/1.2/#mojsklad-json-api-obschie-swedeniq-operator-fil-tracii-quot-podobie-quot)
- [–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è](https://dev.moysklad.ru/doc/api/remap/1.2/workbook/#workbook-fil-traciq-listanie-poisk-i-sortirowka-fil-traciq)

##### order

–ï—Å–ª–∏ –ø–æ–ª–µ `order` –º–∞—Å—Å–∏–≤, —Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –∏–∑ —Ñ–æ—Ä–º—ã –º–∞—Å—Å–∏–≤–∞ –≤ —Å—Ç—Ä–æ–∫—É.

**–ü—Ä–∏–º–µ—Ä—ã:**

- `['name']` ‚Üí `'name'`
- `[['code','desc']]` ‚Üí `'code,desc'`
- `['name', ['code','desc']]` ‚Üí `'name;code,desc'`
- `['name,desc', ['code','asc'], ['moment']]` ‚Üí `'name,desc;code,asc;moment'`

üëâ [examples/query.js](https://github.com/wmakeev/moysklad/blob/master/examples/query.js)

##### expand –∏ limit

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Ç–æ, —á—Ç–æ –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ expand, —Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è limit –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ–µ 100, –∏–Ω–∞—á–µ expand [–±—É–¥–µ—Ç –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω](https://dev.moysklad.ru/doc/api/remap/1.2/workbook/#workbook-chto-takoe-expand).

#### options (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞)

–í—Å–µ –ø–æ–ª—è —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ –æ–±—ä–µ–∫—Ç–µ `options`, –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º –æ–ø–∏—Å–∞–Ω–Ω—ã—Ö –≤ —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ, –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤ –æ–ø—Ü–∏–∏ fetch ([fetch options](https://developer.mozilla.org/en-US/docs/Web/API/Window/fetch#options)).

–ü–æ–ª—è –æ–ø–∏—Å–∞–Ω–Ω—ã–µ –Ω–∏–∂–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π moysklad –∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ fetch:

| –ü–æ–ª–µ                        | –¢–∏–ø       | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| --------------------------- | --------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `rawResponse`               | `boolean` | –ï—Å–ª–∏ `true`, —Ç–æ –º–µ—Ç–æ–¥ –≤–µ—Ä–Ω–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–π –æ–±—ä–µ–∫—Ç [Response](https://developer.mozilla.org/en-US/docs/Web/API/Response). –ö–æ–¥ –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ—Ç–≤–µ—Ç–∞ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ –æ—à–∏–±–∫–∏. –¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ –Ω—É–∂–Ω–æ [–ø—Ä–æ—á–∏—Ç–∞—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ](https://github.com/nodejs/undici?tab=readme-ov-file#garbage-collection).                                                                                                                                                                                                                                                                                            |
| `includeResponse`           | `boolean` | –ï—Å–ª–∏ `true`, —Ç–æ –º–µ—Ç–æ–¥ –≤–µ—Ä–Ω–µ—Ç –º–∞—Å—Å–∏–≤ –∏–∑ –¥–≤—É—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –æ–±—ä–µ–∫—Ç [Response](https://developer.mozilla.org/en-US/docs/Web/API/Response). –û—à–∏–±–∫–∏ –±—É–¥—É—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã –∫–∞–∫ –ø—Ä–∏ –æ–±—ã—á–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ.                                                                                                                                                                                                                                                                                                                                                                                     |
| `rawRedirect`               | `boolean` | –ï—Å–ª–∏ –æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞ —Å –∫–æ–¥–æ–º –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 300-399 (—Ä–µ–¥–∏—Ä–µ–∫—Ç), —Ç–æ –±—É–¥–µ—Ç –≤—ã–±—Ä–æ—à–µ–Ω–∞ –æ—à–∏–±–∫–∞ [MoyskladUnexpectedRedirectError](#moyskladunexpectedredirecterror), –ø–æ—ç—Ç–æ–º—É, —è–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å –æ–ø—Ü–∏—é `rawRedirect` —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º `true`. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –º–µ—Ç–æ–¥ –≤–µ—Ä–Ω–µ—Ç –æ–±—ä–µ–∫—Ç [Response](https://developer.mozilla.org/en-US/docs/Web/API/Response), –∏–∑ –∫–æ—Ç–æ—Ä–æ–≥–æ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å Location –∑–∞–≥–æ–ª–æ–≤–æ–∫. –¢–∞–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —è–≤–Ω–æ –Ω–µ —É–∫–∞–∑–∞–Ω–∞ –æ–ø—Ü–∏—è [redirect](https://developer.mozilla.org/en-US/docs/Web/API/RequestInit#redirect) —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º `follow`. |
| `muteApiErrors`             | `boolean` | –ï—Å–ª–∏ `true` –∏ –∑–∞–ø—Ä–æ—Å –∑–∞–≤–µ—Ä—à–∏–ª—Å—è –æ—à–∏–±–∫–æ–π API, —Ç–æ –º–µ—Ç–æ–¥ –≤–µ—Ä–Ω–µ—Ç –æ–±—ä–µ–∫—Ç —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –æ—à–∏–±–∫–∏ –∏–∑ —Ç–µ–ª–∞ –æ—Ç–≤–µ—Ç–∞ –∫–∞–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –¢–∞–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —É–º–µ—Å—Ç–Ω–æ –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤—Ä—É—á–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫—É. –ü—Ä–æ—á–∏–µ –æ—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç JSON –æ—Ç–≤–µ—Ç–∞ (–Ω–∞–ø—Ä. –æ—à–∏–±–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è), –ø—Ä–æ–¥–æ–ª–∂–∞—Ç –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å—Å—è –≤ —à—Ç–∞—Ç–Ω–æ–º —Ä–µ–∂–∏–º–µ. –î–ª—è –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫ —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–π, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø—Ü–∏—é `muteCollectionErrors`.                                                                                                                                                                                 |
| `muteCollectionErrors`      | `boolean` | –ï—Å–ª–∏ `true`, —Ç–æ –≤—Å–µ –æ—à–∏–±–∫–∏ –≤–Ω—É—Ç—Ä–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–π –ø—Ä–∏ –º–∞—Å—Å–æ–≤–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—É—â–Ω–æ—Å—Ç–µ–π –±—É–¥—É—Ç –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω—ã. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –∏ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤—Ä—É—á–Ω—É—é.                                                                                                                                                                                                                                                                                                                                                                                                              |
| `precision`                 | `boolean` | –ï—Å–ª–∏ `true`, —Ç–æ –≤ –∑–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç –≤–∫–ª—é—á–µ–Ω –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-Lognex-Precision` —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º `true` (–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è —Ü–µ–Ω –∏ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–æ –∫–æ–ø–µ–µ–∫).                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| ~~`webHookDisable`~~        | `boolean` | (deprecated) –ï—Å–ª–∏ `true`, —Ç–æ –≤ –∑–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç –≤–∫–ª—é—á–µ–Ω –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-Lognex-WebHook-Disable` —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º `true` (–æ—Ç–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–µ–±—Ö—É–∫–æ–≤ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –¥–∞–Ω–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞). –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—É—é –æ–ø—Ü–∏—é, –ø—Ä–∏–º–µ–Ω—è–π—Ç–µ `webHookDisableByPrefix`.                                                                                                                                                                                                                                                                                                                            |
| `webHookDisableByPrefix`    | `string`  | –ü—Ä–µ—Ñ–∏–∫—Å url –¥–ª—è –≤—ã–±–æ—Ä–æ—á–Ω–æ–≥–æ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –≤–µ–±—Ö—É–∫–æ–≤, –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–Ω–∞—á–µ–Ω–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ `X-Lognex-WebHook-DisableByPrefix`.                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `downloadExpirationSeconds` | `number`  | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ `X-Lognex-Download-Expiration-Seconds` (–ø–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. [–°—Å—ã–ª–∫–∏ –Ω–∞ —Ñ–∞–π–ª—ã](https://dev.moysklad.ru/doc/api/remap/1.2/#mojsklad-json-api-obschie-swedeniq-ssylki-na-fajly))                                                                                                                                                                                                                                                                                                                                                                           |

<details>
  <summary>–ü—Ä–∏–º–µ—Ä—ã</summary>

- –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ –ø–µ—á–∞—Ç–Ω–æ–π —Ñ–æ—Ä–º—ã –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ ([examples/download-print-form.js](https://github.com/wmakeev/moysklad/blob/master/examples/download-print-form.js)):

  ```js
  import path from 'node:path'
  import { writeFile } from 'node:fs/promises'
  import { fetch } from 'undici'
  import Moysklad from 'moysklad'

  const TEMPLATE_ID = '8a686b8a-9e4a-11e5-7a69-97110004af3e'
  const DEMAND_ID = '13abf361-e9c6-45ea-a940-df70289a7f95'

  async function downloadPrintForm() {
    const ms = Moysklad({ fetch })

    const body = {
      template: {
        meta: {
          href: ms.buildUrl(
            `entity/demand/metadata/customtemplate/${TEMPLATE_ID}`
          ),
          type: 'customtemplate',
          mediaType: 'application/json'
        }
      },
      extension: 'pdf'
    }

    /** @type {import('undici').Response} */
    const response = await ms.POST(
      `entity/demand/${DEMAND_ID}/export`,
      body,
      null,
      // –≤–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ —Å —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–∞–∑–±–æ—Ä–∞
      { rawRedirect: true }
    )

    const location = response.headers.get('location')

    console.log(location)
    // 'https://print-prod.moysklad.ru/temp/.../00123.pdf'

    const formResponse = await fetch(location)

    const blob = await formResponse.blob()

    const buffer = Buffer.from(await blob.arrayBuffer())

    await writeFile(path.join(process.cwd(), '__temp/form.pdf'), buffer)
  }

  downloadPrintForm()
  ```

- –£–∫–∞–∑–∞–Ω–∏–µ HTTP –∑–∞–≥–æ–ª–æ–≤–∫–∞

  ```js
  const ms = Moysklad()

  const folder = {
    meta: {
      type: 'productfolder',
      href: ms.buildUrl(`entity/productfolder/${FOLDER_ID}`)
    },
    description: '–ù–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã —Ç–æ–≤–∞—Ä–æ–≤'
  }

  // –£–∫–∞–∑—ã–≤–∞–µ–º –∫–∞—Å—Ç–æ–º–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ X-Lognex-WebHook-Disable –¥–ª—è PUT –∑–∞–ø—Ä–æ—Å–∞
  const updatedFolder = await ms.PUT(
    `entity/productfolder/${FOLDER_ID}`,
    folder,
    null,
    {
      // –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å webHookDisable: true
      headers: {
        'X-Lognex-WebHook-Disable': true
      }
    }
  )

  assert.equal(updatedFolder.description, folder.description)
  ```

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç

  –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã —Ç–æ–≤–∞—Ä–æ–≤ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –ú–æ–π–°–∫–ª–∞–¥ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –æ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –≤ API. –ü–æ—ç—Ç–æ–º—É, –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Ç–æ–≤–∞—Ä–∞ –ø–æ id –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –¥—Ä—É–≥–æ–π href.

  ```js
  const ms = Moysklad({ fetch })

  // https://api.moysklad.ru/app/#good/edit?id=cb277549-34f4-4029-b9de-7b37e8e25a54
  const PRODUCT_UI_ID = 'cb277549-34f4-4029-b9de-7b37e8e25a54'

  // Error: 308 Permanent Redirect
  await ms.fetchUrl(ms.buildUrl(`entity/product/${PRODUCT_UI_ID}`))

  // –£–∫–∞–∑–∞–Ω–∞ –æ–ø—Ü–∏—è redirect
  const product = await ms.fetchUrl(
    ms.buildUrl(`entity/product/${PRODUCT_UI_ID}`),
    { redirect: 'follow' }
  )

  assert.ok(product) // OK
  ```

</details>

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–º –∑–∞–ø—Ä–æ—Å–æ–≤

–î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ç–æ–∫–æ–º –∑–∞–ø—Ä–æ—Å–æ–≤ —Å —Ü–µ–ª—å—é —É–ª–æ–∂–∏—Ç—å—Å—è –≤ [–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è](https://dev.moysklad.ru/doc/api/remap/1.2/#mojsklad-json-api-ogranicheniq) API –ú–æ–π–°–∫–ª–∞–¥ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–ø—Ä–æ—Å–æ–≤ [moysklad-fetch-planner](https://www.npmjs.com/package/moysklad-fetch-planner).

–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Å—á–∏—Ç—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–∏—Ö –ª–∏–º–∏—Ç–∞—Ö –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤ API –ú–æ–π–°–∫–ª–∞–¥ –∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è –ø–æ—è–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ `429 Too Many Requests`.

–í —Å–ª—É—á–∞–µ –µ—Å–ª–∏ –æ—à–∏–±–∫–∏ 429 –∏–∑–±–µ–∂–∞—Ç—å –Ω–µ —É–¥–∞–ª–æ—Å—å, –∑–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç –ø–æ–≤—Ç–æ—Ä–µ–Ω –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –ª–∏–º–∏—Ç–∞.

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```ts
import Moysklad from 'moysklad'
import { fetch } from 'undici'
import { wrapFetchApi } from 'moysklad-fetch-planner'

const ms = Moysklad({ fetch: wrapFetchApi(fetch) })
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ü–æ–≤—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ

–ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–¥–∞—Ç—å —Å–≤–æ—é –ª–æ–≥–∏–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤. –í –ø—Ä–∏–º–µ—Ä–µ –Ω–∏–∂–µ –∫–æ–¥ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–∞ –∑–∞–ø—Ä–æ—Å–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏.

<details>
  <summary>–ü—Ä–∏–º–µ—Ä</summary>

```js
import Moysklad from 'moysklad'
import { wrapFetch } from 'moysklad-fetch-planner'
import pRetry from 'p-retry'
import { fetch } from 'undici'

/**
 * –ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞ –¥–ª—è API –ú–æ–π–°–∫–ª–∞–¥.
 *
 * 1. –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–ø—Ä–æ—Å–æ–≤ `moysklad-fetch-planner` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ
 * –∫–æ–Ω—Ç—Ä–æ–ª—è –∑–∞ –ª–∏–º–∏—Ç–∞–º–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –æ—à–∏–±–∫–∏ `429 Too Many Request`.
 *
 * 2. –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –º–µ—Ö–∞–Ω–∏–∑–º –ø–æ–≤—Ç–æ—Ä–∞ –æ—à–∏–±–æ—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Å–ª—É—á–∞–µ–≤ –∫–æ–≥–¥–∞ –æ—à–∏–±–∫–∞
 * –º–æ–≥–ª–∞ –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –Ω–µ–ø–æ–ª–∞–¥–∫–∞–º–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ (–¥–ª—è
 * –ø—Ä–∏–º–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è npm –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `p-retry`).
 */
const ms = Moysklad({
  fetch: wrapFetch(fetch),
  retry: (thunk, signal) => {
    return pRetry(thunk, {
      retries: 2,
      shouldRetry: Moysklad.shouldRetryError,
      onFailedAttempt: error => {
        console.log(
          `Attempt ${error.attemptNumber} failed. There are ${error.retriesLeft} retries left.`
        )
      },
      signal
    })
  }
})

try {
  // –ó–∞–ø—Ä–æ—Å —Å –æ—à–∏–±–∫–æ–π –≤ url-–∑–∞–ø—Ä–æ—Å–∞ –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è –Ω–µ –±—É–¥–µ—Ç, –µ—Å–ª–∏ API –ú–æ–π–°–∫–ª–∞–¥
  // –≤–µ—Ä–Ω—É–ª –æ–± —ç—Ç–æ–º —Å–æ–æ–±—â–µ–Ω–∏–µ.
  await ms.GET('foo')
  // ‚Ü≥ Attempt 1 failed. There are 2 retries left.
} catch (err) {
  console.log(err)
  // ‚Ü≥ MoyskladApiError: –ù–µ–æ–ø–æ–∑–Ω–∞–Ω–Ω—ã–π –ø—É—Ç—å: https://api.moysklad.ru/api/remap/1.2/foo (https://dev.moysklad.ru/doc/api/remap/1.2/#error_1002)
}

try {
  // –ó–∞–ø—Ä–æ—Å —Å –æ—à–∏–±–∫–æ–π –∫–æ—Ç–æ—Ä–∞—è –∏–º–µ–µ—Ç HTTP –∫–æ–¥ `503` (–≤ —Ç–æ–º —á–∏—Å–ª–µ, –∏ –¥—Ä—É–≥–∏–µ –∫–æ–¥—ã
  // `5xx`) –±—É–¥–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è. –¢.–∫. –ø–æ–¥–æ–±–Ω–∞—è –æ—à–∏–±–∫–∞ –∏–Ω–æ–≥–¥–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω–∞
  // –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Å–±–æ—è–º–∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ API –ú–æ–π–°–∫–ª–∞–¥.
  await ms.fetchUrl(
    'https://api.moysklad.ru/api/remap/1.0/entity/customerorder'
  )
  // ‚Ü≥ Attempt 1 failed. There are 2 retries left.
  // ‚Ü≥ Attempt 2 failed. There are 1 retries left.
  // ‚Ü≥ Attempt 3 failed. There are 0 retries left.
} catch (err) {
  console.log(err)
  // ‚Ü≥ MoyskladRequestError: 503 Service Unavailable
}

try {
  // –ó–∞–ø—Ä–æ—Å —Å –æ—à–∏–±–∫–æ–π –∫–æ—Ç–æ—Ä–∞—è –∏–º–µ–µ—Ç –∫–æ–¥ `ENOTFOUND` (–∏ —Ä—è–¥ –¥—Ä—É–≥–∏—Ö) –±—É–¥–µ—Ç
  // –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è. –¢.–∫. —Ç–∞–∫–∞—è –æ—à–∏–±–∫–∞ –∏–Ω–æ–≥–¥–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω–∞ —Å–±–æ—è–º–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ
  // HTTP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.
  await ms.fetchUrl('https://example')
  // ‚Ü≥ Attempt 1 failed. There are 2 retries left.
  // ‚Ü≥ Attempt 2 failed. There are 1 retries left.
  // ‚Ü≥ Attempt 3 failed. There are 0 retries left.
} catch (err) {
  console.log(err)
  // ‚Ü≥ TypeError: fetch failed
}

// –ó–∞–ø—Ä–æ—Å—ã –≤—ã–∑–≤–∞–≤—à–∏–µ –æ—à–∏–±–∫–∏ —Å –∫–æ–¥–∞–º–∏ 429 –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∏ –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏
// –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞. –ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤ `retry` —Ç–∞–∫–∏–µ
// –æ—à–∏–±–∫–∏ –Ω–µ –Ω—É–∂–Ω–æ.
```

</details>

### –í–∏–¥—ã –æ—à–∏–±–æ–∫

–í —Ä–∞–º–∫–∞—Ö —Ä–∞–±–æ—Ç—ã —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π –≤—ã–¥–µ–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –≤–∏–¥—ã –æ—à–∏–±–æ–∫:

| ‚Ññ   | –ù–∞–∑–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏         | –ö–ª–∞—Å—Å –æ—à–∏–±–∫–∏                                                        | –ù–∞—Å–ª–µ–¥—É–µ—Ç                                     | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                            |
| --- | ----------------------- | ------------------------------------------------------------------- | --------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1   | **–û—à–∏–±–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏**   | [MoyskladError](#moyskladerror)                                     | Error                                         | –û—à–∏–±–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä –Ω–µ –≤–µ—Ä–Ω–æ —É–∫–∞–∑–∞–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–¥–Ω–æ–≥–æ –∏–∑ –º–µ—Ç–æ–¥–æ–≤).                                                                          |
| 2   | **–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞**      | [MoyskladRequestError](#moyskladrequesterror)                       | [MoyskladError](#moyskladerror)               | –û—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω —Å –∫–æ–¥–æ–º –æ—à–∏–±–∫–∏, —Ç–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ –ù–ï —Å–æ–¥–µ—Ä–∂–∏—Ç JSON —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –æ—à–∏–±–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –ú–æ–π–°–∫–ª–∞–¥.                                                   |
| 3   | **–û—à–∏–±–∫–∞ API –ú–æ–π–°–∫–ª–∞–¥** | [MoyskladApiError](#moyskladapierror)                               | [MoyskladRequestError](#moyskladrequesterror) | –û—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω —Å –∫–æ–¥–æ–º –æ—à–∏–±–∫–∏, —Ç–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç JSON —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –æ—à–∏–±–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –ú–æ–π–°–∫–ª–∞–¥.                                                      |
| 4   | **–û—à–∏–±–∫–∞ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏**  | [MoyskladCollectionError](#moyskladcollectionerror)                 | [MoyskladApiError](#moyskladapierror)         | –û—à–∏–±–∫–∞ –≤ –æ–¥–Ω–æ–º –∏–∑ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤–Ω—É—Ç—Ä–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏.                                                                                                       |
| 5   | **–ù–µ—è–≤–Ω—ã–π —Ä–µ–¥–∏—Ä–µ–∫—Ç**    | [MoyskladUnexpectedRedirectError](#moyskladunexpectedredirecterror) | [MoyskladRequestError](#moyskladrequesterror) | –û—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –∫–æ–≥–¥–∞ –∑–∞–ø—Ä–æ—Å –≤–µ—Ä–Ω—É–ª –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–∫–æ–¥ `3xx`) –∏ —è–≤–Ω–æ –Ω–µ —É–∫–∞–∑–∞–Ω–∞ –æ–ø—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞ `rawRedirect` (–æ–ø—Ü–∏—è `redirect` –Ω–µ —Ä–∞–≤–Ω–∞ `follow`) |

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–∫–∞–∑–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ `muteApiErrors` –∏ `muteCollectionErrors` –¥–ª—è –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫ API –ø.3 –∏ –ø.4 —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ.

–û—à–∏–±–∫–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ fetch –º–æ–¥—É–ª—è –∏–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –Ω–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏. –¢.–µ. –≤—Å–µ –æ–ø–∏—Å–∞–Ω–Ω—ã–µ –≤—ã—à–µ –æ—à–∏–±–∫–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∑–∞–ø—Ä–æ—Å–∞, —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è —É–∂–µ –ø–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞.

#### MoyskladError

> –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –Ω–µ —Å–≤—è–∑–∞–Ω–Ω–∞—è —Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∑–∞–ø—Ä–æ—Å–∞ –∫ API

–ù–∞—Å–ª–µ–¥—É–µ—Ç –∫–ª–∞—Å—Å `Error`

<details>
  <summary>–ü—Ä–∏–º–µ—Ä—ã</summary>

–ö–æ–¥ —Å –æ—à–∏–±–∫–æ–π:

```js
await ms.GET('entity/product', {
  filter: 123
})
```

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—à–∏–±–∫–∏:

```json
{
  "name": "MoyskladError",
  "message": "–ü–æ–ª–µ filter –∑–∞–ø—Ä–æ—Å–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–æ–π –∏–ª–∏ –æ–±—ä–µ–∫—Ç–æ–º"
}
```

</details>

#### MoyskladRequestError

> –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞

–ù–∞—Å–ª–µ–¥—É–µ—Ç –∫–ª–∞—Å—Å [MoyskladError](#moyskladerror)

<details>
  <summary>–ü—Ä–∏–º–µ—Ä—ã</summary>

–ö–æ–¥ —Å –æ—à–∏–±–∫–æ–π:

```js
const ms = Moysklad({ fetch, api: 'foo', apiVersion: '0' })

await ms.GET('foo/bar')
```

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—à–∏–±–∫–∏:

```json
{
  "name": "MoyskladRequestError",
  "message": "404 Not Found",
  "url": "https://api.moysklad.ru/api/foo/0/foo/bar",
  "status": 404,
  "statusText": "Not Found"
}
```

</details>

#### MoyskladApiError

> –û—à–∏–±–∫–∞ API –ú–æ–π–°–∫–ª–∞–¥

–ù–∞—Å–ª–µ–¥—É–µ—Ç –∫–ª–∞—Å—Å [MoyskladRequestError](#moyskladrequesterror)

–û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –≤ —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ API –ø–æ–º–∏–º–æ HTTP –∫–æ–¥–∞ –æ—à–∏–±–∫–∏, —Ç–∞–∫ –∂–µ –≤–µ—Ä–Ω—É–ª–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏ –ú–æ–π–°–∫–ª–∞–¥ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON. –í –æ–±—Ä–∞—Ç–Ω–æ–º —Å–ª—É—á–∞–µ (–æ—Ç–≤–µ—Ç –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç JSON —Å –æ—à–∏–±–∫–æ–π) –±—É–¥–µ—Ç –≤—ã–±—Ä–æ—à–µ–Ω–∞ –æ—à–∏–±–∫–∞ [MoyskladRequestError](#moyskladrequesterror)

<details>
  <summary>–ü—Ä–∏–º–µ—Ä—ã</summary>

–ö–æ–¥ —Å –æ—à–∏–±–∫–æ–π:

```js
await ms.GET('entity/product2')
```

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—à–∏–±–∫–∏:

```json
{
  "name": "MoyskladApiError",
  "message": "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–∏–ø: 'product2' (https://dev.moysklad.ru/doc/api/remap/1.2/#error_1005)",
  "url": "https://api.moysklad.ru/api/remap/1.2/entity/product2",
  "status": 412,
  "statusText": "Precondition Failed",
  "code": 1005,
  "moreInfo": "https://dev.moysklad.ru/doc/api/remap/1.2/#error_1005",
  "errors": [
    {
      "error": "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–∏–ø: 'product2'",
      "code": 1005,
      "moreInfo": "https://dev.moysklad.ru/doc/api/remap/1.2/#error_1005"
    }
  ]
}
```

–ú–æ–∂–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫—É API, —É–∫–∞–∑–∞–≤ `muteApiErrors:true` –≤ –æ–ø—Ü–∏—è—Ö –∑–∞–ø—Ä–æ—Å–∞.

```js
const rawError1 = await ms.GET('entity/product2', null, {
  muteApiErrors: true
})

console.log(rawError1.errors[0].error)
// –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–∏–ø: 'product2'
```

</details>

#### MoyskladCollectionError

> –û—à–∏–±–∫–∞ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –ø—Ä–∏ –º–∞—Å—Å–æ–≤–æ–º —Å–æ–∑–¥–∞–Ω–∏–∏/–∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—É—â–Ω–æ—Å—Ç–µ–π

–ù–∞—Å–ª–µ–¥—É–µ—Ç –∫–ª–∞—Å—Å [MoyskladApiError](#moyskladapierror)

–û—à–∏–±–∫–∞ –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –æ—à–∏–±–∫—É.

–ù–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–≥–¥–∞ –ø—Ä–∏ –º–∞—Å—Å–æ–≤–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ —á–∞—Å—Ç—å –∏–∑ –Ω–∏—Ö –Ω–µ –±—ã–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã, —Ç–æ API –≤–µ—Ä–Ω–µ—Ç –º–∞—Å—Å–∏–≤ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –≤ —á–∞—Å—Ç–∏ –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω–∞ –æ—à–∏–±–∫–∞.

<details>
  <summary>–ü—Ä–∏–º–µ—Ä—ã</summary>
–ö–æ–¥ —Å –æ—à–∏–±–∫–æ–π:

```js
await ms.POST('entity/product', [
  { foo: 'bar' },
  {
    meta: {
      type: 'product',
      href: ms.buildUrl(`entity/product/${uuidFromApi}`)
    },
    weight: 42
  },
  { name: 123 }
])
```

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—à–∏–±–∫–∏:

```json
{
  "name": "MoyskladCollectionError",
  "message": "–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞: –ø–æ–ª–µ 'name' –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å (https://dev.moysklad.ru/doc/api/remap/1.2/#error_3000)",
  "url": "https://api.moysklad.ru/api/remap/1.2/entity/product",
  "status": 400,
  "statusText": "Bad Request",
  "code": 3000,
  "moreInfo": "https://dev.moysklad.ru/doc/api/remap/1.2/#error_3000",
  "line": 1,
  "column": 3,
  "errors": [
    {
      "error": "–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞: –ø–æ–ª–µ 'name' –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å",
      "code": 3000,
      "parameter": "name",
      "moreInfo": "https://dev.moysklad.ru/doc/api/remap/1.2/#error_3000",
      "line": 1,
      "column": 3
    },
    {
      "error": "–û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞: –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è 'name' –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–∏–ø—É —Å—Ç—Ä–æ–∫–∞",
      "code": 2016,
      "moreInfo": "https://dev.moysklad.ru/doc/api/remap/1.2/#error_2016",
      "line": 1,
      "column": 169
    }
  ],
  "errorsIndexes": [
    [
      0,
      [
        {
          "error": "–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞: –ø–æ–ª–µ 'name' –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å",
          "code": 3000,
          "parameter": "name",
          "moreInfo": "https://dev.moysklad.ru/doc/api/remap/1.2/#error_3000",
          "line": 1,
          "column": 3
        }
      ]
    ],
    [
      2,
      [
        {
          "error": "–û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞: –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è 'name' –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–∏–ø—É —Å—Ç—Ä–æ–∫–∞",
          "code": 2016,
          "moreInfo": "https://dev.moysklad.ru/doc/api/remap/1.2/#error_2016",
          "line": 1,
          "column": 169
        }
      ]
    ]
  ]
}
```

–ú–æ–∂–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏, —É–∫–∞–∑–∞–≤ `muteCollectionErrors:true`
–≤ –æ–ø—Ü–∏—è—Ö –∑–∞–ø—Ä–æ—Å–∞.

```js
const result2 = await ms.POST(
  'entity/product',
  [
    { foo: 'bar' },
    {
      meta: {
        type: 'product',
        href: ms.buildUrl(`entity/product/${uuidFromApi}`)
      },
      weight: 42
    },
    { name: 123 }
  ],
  null,
  {
    muteCollectionErrors: true
  }
)

const collItemError = result2.find(it => it.errors)

if (collItemError) {
  console.log(collItemError.errors[0].error)
  // –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞: –ø–æ–ª–µ 'name' –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å
}
```

</details>

#### MoyskladUnexpectedRedirectError

> –û—à–∏–±–∫–∞ –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –≤–µ—Ä–Ω—É–ª –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–∫–æ–¥ `3xx`), –∫–æ–≥–¥–∞ —è–≤–Ω–æ –Ω–µ —É–∫–∞–∑–∞–Ω–∞ –æ–ø—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞ `rawRedirect` –∏ –æ–ø—Ü–∏—è `redirect` –Ω–µ —Ä–∞–≤–Ω–∞ `follow`

–ù–∞—Å–ª–µ–¥—É–µ—Ç –∫–ª–∞—Å—Å [MoyskladRequestError](#moyskladrequesterror)

<details>
  <summary>–ü—Ä–∏–º–µ—Ä—ã</summary>

```js
/** id —Ç–æ–≤–∞—Ä–∞ –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ú–æ–π–°–∫–ª–∞–¥ */
const uuidFromApp = 'cb277549-34f4-4029-b9de-7b37e8e25a54'

/** id —Ç–æ–≤–∞—Ä–∞ –∏–∑ API (–æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç id –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è) */
let uuidFromApi

const getProduct = id => ms.GET(`entity/product/${id}`)

try {
  await getProduct(uuidFromApp)
} catch (err) {
  if (err instanceof Moysklad.MoyskladUnexpectedRedirectError) {
    uuidFromApi = ms.parseUrl(err.location).path.pop()
    await getProduct(uuidFromApi)
  } else {
    throw err
  }
}
```

–ú–æ–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–µ–∑ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –æ—à–∏–±–∫–∏:

```js
let product = await ms.GET(`entity/product/${uuidFromApp}`, null, {
  rawRedirect: true
})

if (product instanceof Response) {
  uuidFromApi = ms.parseUrl(product.headers.get('location')).path.pop()

  product = await ms.GET(`entity/product/${uuidFromApi}`)
}

console.log(product.id === uuidFromApp) // false
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, —É–∫–∞–∑–∞–≤ –∑–Ω–∞—á–µ–Ω–∏–µ `follow` –≤ –æ–ø—Ü–∏–∏ `redirect`:

```js
const product = await ms.GET(`entity/product/${uuidFromApp}`, null, {
  redirect: 'follow'
})

console.log(product.id === uuidFromApp) // false
```

</details>

## –°–æ–±—ã—Ç–∏—è

| –°–æ–±—ã—Ç–∏–µ         | –ü–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–π –æ–±—ä–µ–∫—Ç                           | –ú–æ–º–µ–Ω—Ç –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏—è            |
| --------------- | --------------------------------------------- | ----------------------------- |
| `request`       | `{ requestId, url, options }`                 | –û—Ç–ø—Ä–∞–≤–ª–µ–Ω http –∑–∞–ø—Ä–æ—Å         |
| `response`      | `{ requestId, url, options, response }`       | –ü–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å       |
| `response:body` | `{ requestId, url, options, response, body }` | –ó–∞–≥—Ä—É–∂–µ–Ω–æ —Ç–µ–ª–æ –æ—Ç–≤–µ—Ç–∞         |
| `error`         | `Error`, `{ requestId }`                      | –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞ |

<details>
  <summary>–ü—Ä–∏–º–µ—Ä—ã</summary>

```js
import { fetch } from 'undici'
import { EventEmitter } from 'events'
import Moysklad from 'moysklad'

/** @type {Moysklad.MoyskladEmitter} */
const emitter = new EventEmitter()

const ms = Moysklad({ fetch, emitter })

emitter
  .on('request', ({ requestId, url, options }) => {
    console.log(`${requestId} ${options.method} ${url}`)
  })
  .on('error', (err, { requestId }) => {
    console.log(requestId, err)
  })

ms.GET('entity/customerorder', { limit: 1 }).then(res => {
  console.log('Order name: ' + res.rows[0].name)
})
```

–ë–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Å–º–æ—Ç—Ä–∏—Ç–µ –≤ [examples/events.js](https://github.com/wmakeev/moysklad/blob/master/examples/events.js).

</details>

## –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

[CHANGELOG.md](https://github.com/wmakeev/moysklad/blob/master/CHANGELOG.md)

## –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –Ω–µ–º–Ω–æ–≥–æ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤ –¥—Ä—É–≥–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏ npm –ø–∞–∫–µ—Ç–µ. –ë–µ–∑ –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π, –Ω–æ —Å —É–±—Ä–∞–Ω–Ω—ã–º –ª–µ–≥–∞—Å–∏ –∫–æ–¥–æ–º.

- –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –Ω–∞ TypeScript
- –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞
- –£–±—Ä–∞—Ç—å –≤—Å—ë –ª–µ–≥–∞—Å–∏ (–≤ —Ç–æ–º —á–∏—Å–ª–µ —Ç–æ, —á—Ç–æ —Ç—è–Ω–µ—Ç –ª–∏—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ - "have2" –∏ "stampit")
- –ë–æ–ª–µ–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —á–∞—Å—Ç–∏ –æ–ø–∏—Å–∞–Ω–∏–π –º–µ—Ç–æ–¥–æ–≤

## TODO

–°–≤–∞–ª–∫–∞ –º—ã—Å–ª–µ–π –ø–æ —Ä–∞–∑–≤–∏—Ç–∏—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ - [TODO.md](https://github.com/wmakeev/moysklad/blob/master/TODO.md)
